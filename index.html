<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>CX åŠ å¯†ç»ˆç«¯</title><style>:root{--p:#00f2ff;--s:#0078ff;--bg:#0f172a;--c:rgba(30,41,59,0.7);--b:rgba(255,255,255,0.1);--t:#e2e8f0;--ts:#94a3b8;--f:-apple-system,sans-serif;--m:'Courier New',monospace}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}body{margin:0;padding:15px;background:var(--bg) radial-gradient(circle at 15% 50%,rgba(0,242,255,0.08),transparent 25%);color:var(--t);font-family:var(--f);min-height:100vh;display:flex;flex-direction:column;align-items:center}body::before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(var(--b) 1px,transparent 1px),linear-gradient(90deg,var(--b) 1px,transparent 1px);background-size:40px 40px;opacity:.15;z-index:-1;pointer-events:none}.box{width:100%;max-width:600px;padding-bottom:80px}h1{text-align:center;font-size:1.2rem;margin:10px 0 20px;background:linear-gradient(90deg,var(--p),var(--s));-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800;letter-spacing:3px;border-bottom:1px solid var(--b);padding-bottom:15px}.nav{display:flex;gap:10px;margin-bottom:20px;background:rgba(0,0,0,.3);padding:5px;border-radius:8px;border:1px solid var(--b)}.nb{flex:1;border:none;background:0 0;color:var(--ts);padding:10px;font-size:.85rem;font-weight:600;cursor:pointer;border-radius:5px;transition:.3s;font-family:var(--m)}.nb.on{background:rgba(0,242,255,.15);color:var(--p);box-shadow:0 0 10px rgba(0,242,255,.1);border:1px solid rgba(0,242,255,.3)}.mod{display:none;animation:F .4s ease}.mod.on{display:block}.card{background:var(--c);backdrop-filter:blur(16px);border:1px solid var(--b);border-radius:12px;padding:15px;margin-bottom:15px;box-shadow:0 4px 20px rgba(0,0,0,.3)}.hd{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;border-bottom:1px solid var(--b);padding-bottom:8px;color:var(--p);font-weight:600;font-size:.9rem}.dot{width:8px;height:8px;border-radius:50%;background:#475569;transition:.3s}.dot.on{background:#00ff88;box-shadow:0 0 8px #00ff88}label{display:block;font-size:.75rem;color:var(--ts);margin:10px 0 6px;font-family:var(--m)}input,textarea,select{width:100%;background:rgba(0,0,0,.4);border:1px solid var(--b);border-radius:6px;padding:12px;color:#fff;font-family:var(--m);font-size:.9rem;outline:0;transition:.3s}input:focus,textarea:focus,select:focus{border-color:var(--s);box-shadow:0 0 10px rgba(0,120,255,.2)}textarea{min-height:80px;resize:vertical}.btn{width:100%;border:none;border-radius:6px;padding:14px;font-weight:600;cursor:pointer;margin-top:15px;background:linear-gradient(135deg,var(--s),#0056b3);color:#fff;transition:.2s}.btn:active{transform:scale(.98)}.btn:disabled{opacity:.5;filter:grayscale(1)}.res{background:rgba(0,0,0,.6);border:1px dashed #444;border-radius:6px;padding:10px;margin-top:12px;word-break:break-all;font-family:var(--m);font-size:.8rem;display:none}.res.on{display:block;animation:S .3s}.cpy{background:rgba(0,242,255,.1);color:var(--p);padding:8px;font-size:.75rem;width:100%;margin-top:8px;border:1px solid rgba(0,242,255,.2);cursor:pointer;transition:.3s}.cpy:hover{background:rgba(0,242,255,.2)}.row{display:flex;align-items:center;gap:8px;font-size:.8rem;color:var(--ts);margin:5px 0}.tabs{display:flex;border-bottom:1px solid var(--b);margin-bottom:15px}.tab{flex:1;text-align:center;padding:10px;font-size:.85rem;color:var(--ts);cursor:pointer;border-bottom:2px solid transparent;transition:.3s}.tab.on{color:var(--p);border-bottom-color:var(--p);background:linear-gradient(to top,rgba(0,242,255,.05),transparent)}.pan{display:none}.pan.on{display:block}input[type=file]{background:rgba(255,255,255,.05);padding:10px;width:100%;border-radius:6px;color:var(--ts);font-size:.8rem}.p-img{width:100%;max-height:200px;object-fit:contain;background:#000;border:1px solid var(--b);margin-top:10px;display:none}.est{font-size:.75rem;color:var(--p);text-align:right;min-height:18px;margin-top:4px}.bg{display:flex;gap:10px;margin-top:10px}.ba{flex:1;background:rgba(255,255,255,.1);color:var(--p);border:1px solid var(--b);padding:10px;border-radius:6px;cursor:pointer;font-weight:600;font-size:.8rem}#toast{position:fixed;bottom:30px;left:50%;transform:translate(-50%,100px);background:rgba(255,255,255,.95);color:#000;padding:10px 24px;border-radius:30px;font-size:.85rem;opacity:0;transition:.4s;pointer-events:none;font-weight:700;z-index:99;box-shadow:0 5px 15px rgba(0,0,0,.5)}#toast.on{transform:translate(-50%,0);opacity:1}@keyframes F{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}@keyframes S{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}</style></head><body><div class="box"><h1>CXç‰ŒåŠ å¯†ç»ˆç«¯ V1</h1><div class="nav"><button class="nb on" onclick="SM('txt')">æ–‡æœ¬ä¿¡é“</button><button class="nb" onclick="SM('img')">å›¾åƒåŠ å¯†</button></div><div id="m-txt" class="mod on"><div class="card"><div class="hd"><span>èº«ä»½å‡­è¯</span><div id="led" class="dot"></div></div><label>åŠ©è®°å¥</label><input type="text" id="tp" placeholder="åœ¨æ­¤è¾“å…¥å”¯ä¸€ä¸­æ–‡/å­—ç¬¦å£ä»¤" oninput="TR()"><button class="btn" onclick="TI()" id="tb">åˆå§‹åŒ–èº«ä»½</button><div id="bx-pk" class="res"><div style="color:var(--p);margin-bottom:5px">æœ¬ç«¯å…¬é’¥:</div><div id="tpk" style="color:#fff"></div><button class="cpy" onclick="C('tpk')">å¤åˆ¶å…¬é’¥</button></div></div><div class="card"><div class="hd">åŠ å¯†å‘é€</div><label>æ¥æ”¶æ–¹å…¬é’¥</label><input type="text" id="trpk" placeholder="ç²˜è´´å¯¹æ–¹å…¬é’¥"><div class="row"><input type="checkbox" id="tslf" onchange="TS()" style="width:auto"><span>å›è·¯æµ‹è¯• (å‘ç»™è‡ªå·±)</span></div><label>æ˜æ–‡ä¿¡æ¯</label><textarea id="tpt" placeholder="è¾“å…¥æœºå¯†ä¿¡æ¯..."></textarea><button class="btn" onclick="TE()">æ‰§è¡ŒåŠ å¯†</button><div id="bx-ct" class="res"><div id="tct" style="color:var(--ts)"></div><button class="cpy" onclick="C('tct')">å¤åˆ¶å¯†æ–‡æ•°æ®åŒ…</button></div></div><div class="card"><div class="hd">è§£å¯†æ¥æ”¶</div><label>å¯†æ–‡æ•°æ®åŒ…</label><textarea id="tci" placeholder="ç²˜è´´ Base64 å¯†æ–‡..."></textarea><button class="btn" onclick="TD()">æ‰§è¡Œè§£å¯†</button><div id="bx-dt" class="res"><div style="color:#00ff88;margin-bottom:5px">åŸå§‹å†…å®¹:</div><div id="tdt" style="color:#fff"></div></div></div></div><div id="m-img" class="mod"><div class="card" style="padding:0;overflow:hidden"><div class="tabs"><div class="tab on" onclick="IS('enc')">åŠ å¯† (å‘é€)</div><div class="tab" onclick="IS('dec')">è§£å¯† (æ¥æ”¶)</div></div><div style="padding:15px"><div id="p-enc" class="pan on"><label>1. é€‰æ‹©åŸå›¾</label><input type="file" id="if-enc" accept="image/*" onchange="IP(this,1)"><img id="ip-enc" class="p-img"><label>2. è®¾å®šå¯†é’¥</label><input type="text" id="ik-enc" placeholder="è¾“å…¥åŠ å¯†å¯†ç ï¼ˆæ”¯æŒä¸­è‹±æ–‡å’Œæ•°å­—ï¼‰"><label>3. å‹ç¼©è®¾ç½®</label><select id="iq" onchange="IU()"><option value="0.75">æ ‡å‡† (æ¨è)</option><option value="0.92">é«˜è´¨é‡</option><option value="0.6">é«˜å‹ç¼© (å™ªç‚¹å¤š)</option><option value="png">æ— æŸ (PNG)</option></select><div id="ie" class="est"></div><button class="btn" onclick="IR(1)">ç”Ÿæˆè§†è§‰ä¹±ç </button><div id="ir-enc" class="res"><label>âœ… å¤„ç†å®Œæˆ</label><img id="io-enc" class="p-img" style="display:block;border-color:#00ff88"><div class="bg"><button class="ba" onclick="DL('io-enc')">ğŸ“¥ ä¸‹è½½</button><button class="ba" onclick="CI('io-enc')">ğŸ“‹ å¤åˆ¶</button></div></div></div><div id="p-dec" class="pan"><label>1. ä¸Šä¼ å¯†æ–‡å›¾åƒ</label><input type="file" id="if-dec" accept="image/*" onchange="IP(this,0)"><img id="ip-dec" class="p-img"><label>2. è§£å¯†å¯†é’¥</label><input type="text" id="ik-dec" placeholder="è¾“å…¥å¯¹åº”å¯†ç "><button class="btn" onclick="IR(0)">å¼€å§‹è¿˜åŸ</button><div id="ir-dec" class="res"><label style="color:#00ff88">âœ… è¿˜åŸç»“æœ</label><img id="io-dec" class="p-img" style="display:block;border-color:#00ff88"><div class="bg"><button class="ba" onclick="DL('io-dec')">ğŸ“¥ ä¸‹è½½</button><button class="ba" onclick="CI('io-dec')">ğŸ“‹ å¤åˆ¶</button></div></div></div></div></div><div id="ild" style="display:none;text-align:center;color:var(--p);margin-top:10px;font-family:var(--m)">>>> æ•°æ®æµå¤„ç†ä¸­...</div></div></div><div id="toast">ç³»ç»Ÿæç¤º</div><canvas id="cvs" style="display:none"></canvas><script>const d=document,$=i=>d.getElementById(i),T=m=>{let t=$('toast');t.innerText=m;t.className='on';clearTimeout(t.tm);t.tm=setTimeout(()=>t.className='',2500)};function C(i){let t=$(i).innerText;if(t)navigator.clipboard.writeText(t).then(()=>T("å·²å¤åˆ¶æ–‡æœ¬"))}function SM(m){d.querySelectorAll('.mod').forEach(e=>e.classList.remove('on'));d.querySelectorAll('.nb').forEach(e=>e.classList.remove('on'));$('m-'+m).classList.add('on');d.querySelectorAll('.nb')[m==='txt'?0:1].classList.add('on')}const M={P:2n**255n-19n,i(n){return this.p(n,this.P-2n)},p(b,e){let r=1n;b%=this.P;while(e>0n){if(e%2n===1n)r=(r*b)%this.P;b=(b*b)%this.P;e/=2n}return r},m(s,p){const k=new Uint8Array(s);k[0]&=248;k[31]&=127;k[31]|=64;let n=0n;for(let i=31;i>=0;i--)n=(n<<8n)+BigInt(k[i]);let u=0n;if(p)for(let i=31;i>=0;i--)u=(u<<8n)+BigInt(p[i]);else u=9n;let x1=u,x2=1n,z2=0n,x3=u,z3=1n,sw=0n;for(let t=254;t>=0;t--){const kt=(n>>BigInt(t))&1n;sw^=kt;if(sw){[x2,x3]=[x3,x2];[z2,z3]=[z3,z2]}sw=kt;const A=x2+z2,AA=A*A,B=x2-z2,BB=B*B,E=AA-BB,C=x3+z3,D=x3-z3,DA=D*A,CB=C*B,ad=DA+CB,su=DA-CB;x3=ad*ad;z3=x1*(su*su);x2=AA*BB;z2=E*(AA+486662n*E/4n);x2%=this.P;z2%=this.P;x3%=this.P;z3%=this.P}if(sw){[x2,x3]=[x3,x2];[z2,z3]=[z3,z2]}const r=(x2*this.i(z2))%this.P;const b=new Uint8Array(32);let tp=r;for(let i=0;i<32;i++){b[i]=Number(tp&0xFFn);tp>>=8n}return b}};const A={e:new TextEncoder,d:new TextDecoder,pr:null,pk:null,b(b){return btoa(String.fromCharCode(...new Uint8Array(b))).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'')},u(s){let b=s.replace(/-/g,'+').replace(/_/g,'/');while(b.length%4)b+='=';return Uint8Array.from(atob(b),c=>c.charCodeAt(0)).buffer},async i(t){if(!t)throw"è¯·è¾“å…¥å£ä»¤";const k=await crypto.subtle.importKey("raw",this.e.encode(t),{name:"PBKDF2"},0,["deriveBits"]),s=await crypto.subtle.deriveBits({name:"PBKDF2",salt:this.e.encode("SV2"),iterations:2e5,hash:"SHA-256"},k,256);this.pr=new Uint8Array(s);this.pk=this.b(M.m(this.pr,null));return this.pk},async r(k,t,d){if(!this.pr)throw"è¯·åˆå§‹åŒ–èº«ä»½";const o="AES-GCM";if(d){const j=JSON.parse(this.d.decode(this.u(t))),s=M.m(this.pr,new Uint8Array(this.u(j.k))),y=await crypto.subtle.importKey("raw",s,o,0,["decrypt"]);return this.d.decode(await crypto.subtle.decrypt({name:o,iv:this.u(j.i)},y,this.u(j.c)))}else{const e=crypto.getRandomValues(new Uint8Array(32)),s=M.m(e,new Uint8Array(this.u(k))),y=await crypto.subtle.importKey("raw",s,o,0,["encrypt"]),v=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.encrypt({name:o,iv:v},y,this.e.encode(t));return this.b(this.e.encode(JSON.stringify({k:this.b(M.m(e,null)),i:this.b(v),c:this.b(c)})))}}};async function TI(){let b=$('tb');b.disabled=1;b.innerText="è®¡ç®—ä¸­...";setTimeout(async()=>{try{$('tpk').innerText=await A.i($('tp').value);$('bx-pk').classList.add('on');$('led').classList.add('on');b.innerText="èº«ä»½å·²æ¿€æ´»"}catch(e){alert(e);b.disabled=0;b.innerText="åˆå§‹åŒ–èº«ä»½"}},50)}async function TE(){try{$('tct').innerText=await A.r($('trpk').value,$('tpt').value,0);$('bx-ct').classList.add('on')}catch(e){T("é”™è¯¯:"+e)}}async function TD(){try{$('tdt').innerText=await A.r(0,$('tci').value,1);$('bx-dt').classList.add('on')}catch(e){$('tdt').innerText="è§£å¯†å¤±è´¥";$('bx-dt').classList.add('on')}}function TS(){let c=$('tslf');if(c.checked){if(A.pk)$('trpk').value=A.pk;else{T("è¯·å…ˆç”Ÿæˆèº«ä»½");c.checked=0}}}function TR(){$('led').className='dot';$('tb').disabled=0;$('tb').innerText="åˆå§‹åŒ–èº«ä»½";$('bx-pk').classList.remove('on')}let iw=0,ih=0;const R=a=>()=>{var t=a+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return((t^t>>>14)>>>0)/4294967296},H=s=>{let a=1779033703,b=3144134277,c=1013904242,d=2773480762;for(let i=0,k;i<s.length;i++){k=s.charCodeAt(i);a=b^Math.imul(a^k,597399067);b=c^Math.imul(b^k,2869860233);c=d^Math.imul(c^k,951274213);d=a^Math.imul(d^k,2716044179)}return a+b+c+d},GP=(l,s)=>{const r=R(s),p=new Uint32Array(l);for(let i=0;i<l;i++)p[i]=i;for(let i=l-1;i>0;i--){const j=Math.floor(r()*(i+1)),t=p[i];p[i]=p[j];p[j]=t}return p};function IS(m){d.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));d.querySelectorAll('.pan').forEach(p=>p.classList.remove('on'));const i=m==='enc'?0:1;d.querySelectorAll('.tab')[i].classList.add('on');$('p-'+m).classList.add('on')}function IP(i,e){const f=i.files[0];if(!f)return;const r=new FileReader;r.onload=v=>{const g=$(e?'ip-enc':'ip-dec');g.onload=()=>{if(e){iw=g.naturalWidth;ih=g.naturalHeight;IU()}};g.src=v.target.result;g.style.display='block'};r.readAsDataURL(f)}function IU(){const v=$('ie'),q=$('iq').value;if(!iw){v.innerText="";return}const t=iw*ih;let b=0;if(q==='png')b=t*4*.75;else{const n=parseFloat(q);b=t*4*(n>.9?.45:n>.7?.25:.12)}v.innerText="é¢„è®¡: "+(b>1048576?(b/1048576).toFixed(2)+" MB":(b/1024).toFixed(0)+" KB")}async function IR(e){const s=e?'enc':'dec',f=$('if-'+s).files[0],k=$('ik-'+s).value;if(!f)return T("è¯·é€‰æ‹©å›¾ç‰‡");if(!k)return T("è¯·è¾“å…¥å¯†é’¥");$('ir-'+s).classList.remove('on');$('ild').style.display='block';setTimeout(()=>{const r=new FileReader;r.onload=v=>{const g=new Image;g.onload=()=>{IX(g,k,e,u=>{const o=$('io-'+s);o.src=u;$('ild').style.display='none';$('ir-'+s).classList.add('on');o.scrollIntoView({behavior:'smooth'})})};g.src=v.target.result};r.readAsDataURL(f)},50)}function IX(g,k,e,c){const v=$('cvs'),w=g.width,h=g.height;v.width=w;v.height=h;const x=v.getContext('2d');x.drawImage(g,0,0);const d=x.getImageData(0,0,w,h),b=d.data,l=w*h,p=GP(l,H(k)),n=new Uint8ClampedArray(b.length);if(e)for(let i=0;i<l;i++){let s=p[i]*4,t=i*4;n[t]=b[s];n[t+1]=b[s+1];n[t+2]=b[s+2];n[t+3]=255}else for(let i=0;i<l;i++){let s=i*4,t=p[i]*4;n[t]=b[s];n[t+1]=b[s+1];n[t+2]=b[s+2];n[t+3]=255}x.putImageData(new ImageData(n,w,h),0,0);const q=$('iq').value;c(v.toDataURL('image/'+(e&&(q!=='png')?'jpeg':'png'),e&&q!=='png'?parseFloat(q):void 0))}function DL(i){const l=d.createElement('a');l.download=`CX_${Date.now()}.png`;l.href=$(i).src;l.click()}async function CI(i){try{const b=await(await fetch($(i).src)).blob();await navigator.clipboard.write([new ClipboardItem({'image/png':b})]);T("âœ… å›¾ç‰‡å·²å¤åˆ¶")}catch(e){T("æ— æ³•å¤åˆ¶ï¼Œè¯·é•¿æŒ‰ä¿å­˜")}}</script></body></html>
